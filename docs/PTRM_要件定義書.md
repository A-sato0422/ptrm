# PTRM（パーソナル・トレーニング・ロードマップ）— MVP 要件定義書

**バージョン:** 1.0  
**作成日:** 2026-02-01  
**対象スコープ:** P0機能のみ（第1フェーズ・3月末リリース）

---

## 1. プロジェクト概要

### 1.1 システム名と目的

モチベーション管理システム「パーソナル・トレーニング・ロードマップ（PTRM）」は、パーソナルジムのクライアントが自らの成長を可視化し、トレーナーとの間で「フィードバック→確認→挑戦」のサイクルを形成するためのシステムです。

現在、トレーナーはセッション後の結果を口頭で伝えるのが基本で、クライアント自身がこれまでの実績を確認しにくい環境になっています。PTRMを導入することで、クライアントが視覚的に自身の成長を認識し、モチベーションを維持する環境を整えます。

### 1.2 ミッション

「生涯挑戦」— クライアントが自らの成長を可視化し、主体的に「挑戦」し続けられる環境をテクノロジーで提供する。

### 1.3 ターゲットユーザー

| ロール | 対象 | 利用端末 |
|---|---|---|
| クライアント（エンドユーザー） | 40代後半〜50代以上の女性を中心 | スマートフォン（SPのみ） |
| トレーナー | 4名 | PC メイン（SP対応も必要） |

クライアント側のUIは直感的で温かみのある設計を重視し、ITリテラシーへの大きな配慮は不要です（トレーナーが使い方を伝授できるため）。

### 1.4 スケジュール

| イベント | 時期 |
|---|---|
| キックオフミーティング | 2026-01-10 |
| プロトタイプデプロイ | 2月初旬 |
| クライアント（山下さん）確認 | プロトタイプ後 |
| フィードバック修正＆P0全機能実装 | 確認後〜3月末 |
| 第1フェーズ リリース | 2026年3月末 |

---

## 2. 技術スタック

| 区分 | 技術・サービス | 備考 |
|---|---|---|
| フロントエンド | TypeScript | PWA対応 |
| ビルドツール | Vite | — |
| バックエンド（BaaS） | Supabase（無料プラン） | PostgreSQL、REST API自動生成 |
| ホスティング＆CI/CD | Vercel（無料プラン） | — |
| 認証 | LIFF（LINE Front-end Framework） | LINE公式アプリからのアクセスのみ |
| 定期実行 | GitHub Actions | P0では使用しない（P1で定期バックアップとして利用する予定） |
| 外部予約システム | Azzist（遷移対応） | https://azzist.jp/schedule/60 |

### 2.1 技術選定の背景

Supabaseは既存のSQL知識（CakePHP時代）を活かせるため開発効率が高く、無料プラン内で約100名のユーザーに対応可能です。LIFFはLINEの公式機能で安全性が高く、「LINEアプリから直結で認証なし」という最大のUX要件を満たします。Vercel + Supabase無料プランで、サーバー運用費用は0円です。

### 2.2 LIFF認証の制約と対応

| 制約 | 対応方針 |
|---|---|
| LINEアプリからしかアクセスできない | クライアント側はLINE経由のみとのため問題なし。トレーナー管理画面はPC対応も必要なため、今後の拡張で検討余地あり |
| LINE Developersでの設定が必要 | 開発側で対応 |
| LINE通知（Messaging API）は月200通まで無料 | P0では通知機能は対象外。将来拡張で検討 |

---

## 3. データモデル（概要）

### 3.1 カテゴリー構成の方針

トレーニングカテゴリーは以下の4種目で固定とし、コースとの紐づけは行いません。各カテゴリーにはクライアントごとの現在レベルが記録されます。

| カテゴリー名 |
|---|
| マットピラティス |
| ウェイトトレーニング |
| スポーツトレーニング |
| ムーブメントトレーニング |

### 3.2 主要テーブル構成（概要）

```
categories       - トレーニングカテゴリー（4種目固定）
tasks            - 宿題マスター（タスク名・YouTube URL・宿題の説明/意義）
stages           - 6ステージの定義
clients          - クライアント情報（LINE ID で識別）
client_levels    - クライアント別の現在レベル（4項目分）
client_tasks     - クライアント別の宿題割り当てと完了状態
will_matrix      - クライアント別の好み評価（Like/Dislike）
trainer_memos    - トレーナーのメモ（履歴）
trainers         - トレーナーアカウント
level_history    - レベル更新履歴（いつ誰が更新したか）
```

### 3.3 初期データ

全クライアントは**Lv.1から開始**します。既存会員データの移行は不要です。

---

## 4. P0機能要件（クライアント側・ユーザー画面）

クライアント側画面は**スマートフォン（SP）のみ対応**です。

### 4.1 成長可視化ダッシュボード（ホーム画面）

ダッシュボードはPTRMのメイン画面となり、クライアントがトレーニング前に自身の現状を把握するためのコンテンツを集約します。

**レーダーチャート（中央配置）**  
4項目（マットピラティス・ウェイトトレーニング・スポーツトレーニング・ムーブメントトレーニング）の現在レベルを視覚的に表示します。次の合目までのギャップ（目標値との差分）も同じチャートで確認できるようにします。

**アクションリスト表示**  
現在のレベルから次に進むために必要な具体的タスクを一覧で表示します。各タスクをタップすると詳細画面に遷移し、「完了/未完了」を編集できます。

**好み評価（Like/Dislike）の確認**  
4項目それぞれに対して「好き・嫌い・どちらでもない」の評価を表示し、クライアント自身で編集できます。この情報はトレーナー側の管理画面で参照されます。

**予約ボタン**  
ナビゲーションメニューに「セッション予約」ボタンを配置します。タップすると、Azzist（https://azzist.jp/schedule/60）へ別画面で遷移し、そちらで予約を行います。

### 4.2 6ステージ（合目）解説画面

メニューから「ステージ」へ遷移で確認可能にします。6つのステージの区切り・名称・説明を一覧表示し、各項目ごとのクリア対応レベルも表示します。

| ステージ | レベル範囲 | テーマ |
|---|---|---|
| Stage 1 | Lv.1–5 | 導入・習得期 |
| Stage 2 | Lv.6–10 | 定着・習慣期 |
| Stage 3 | Lv.11–15 | 向上・変化期 |
| Stage 4 | Lv.16–20 | 応用・発展期（★40代レベルへの挑戦） |
| Stage 5 | Lv.21–25 | 洗練・専門期 |
| Stage 6 | Lv.26–30 | 究極・レジェンド |

### 4.3 プロフィール表示画面

ユーザー名・入会日・基本情報を表示します。ステージをクリアすると達成バッジが獲得され、プロフィール画面で確認できます。

---

## 5. P0機能要件（トレーナー側・管理画面）

トレーナー側画面は**PC＋SP両方対応**です。4名のトレーナーが操作し、権限管理は現時点では不要です。

### 5.1 クライアント一覧画面

登録されている全クライアントを一覧で表示します。各クライアントのカード内には以下を表示します：

- クライアント名・アバター
- 4項目の現在レベルとステージ状態（バッジ表示）
- 次のゴール表示（例：「全項目1合目クリアで2合目ゲート開放」）
- 最新メモの要約
- 現在の課題（アクションリスト）
- やりたい・やりたくない の概要

検索・フィルタ機能も提供します。

### 5.2 クライアント詳細画面

一覧から対象クライアントをタップすると詳細画面へ遷移します。

**進捗状況管理**  
4項目のレベルをバッジで表示し、次のゴールを明確にします。トレーナーはここから各項目のレベルを更新できます。レベル更新には「いつ誰が更新したか」の履歴が記録されます。

**アクションリスト管理（現在の課題）**  
現在の課題タスクを確認・追加できます。

**やりたい・やりたくない確認**  
クライアントが入力した好み評価を参照できます。

**メモ・コメント管理（履歴）**  
セッション後のメモを入力・追加できます。メモは日付・対応トレーナー名と共に履歴として蓄積され、トレーナー間での情報共有に使用します。

### 5.3 設定画面（マスターデータ管理）

以下のマスターデータをトレーナーが編集できる設定画面を提供します。いずれの項目も全トレーナーが編集可能です。


**30階級の達成条件・解説テキスト編集**  
各レベルの達成条件テキスト（例：「スクワット自体重80%達成」）と、その意義の解説テキスト（Why。例：「骨密度向上のため」）を編集できます。

**アクションリストのマスター管理**  
レベルごとの推奨タスクを編集できます。

**6ステージの名称・説明編集**  
Stage 1〜6の名前や説明を編集できます。

**一括インポート機能**  
Excel/CSVでマスターデータを一括登録できます。インポートファイルのフォーマットは今後別途確認・定義する予定です。

**トレーナーアカウント管理**  
複数トレーナーの登録を行います。権限設定は不要の想定です。

---

## 6. 非機能要件

| 区分 | 要件 |
|---|---|
| レスポンス対応 | クライアント画面はSPのみ。管理画面はPC＋SP両方対応 |
| 形態 | PWA（Progressive Web App）。インストール不要、ホーム画面追加可能 |
| アクセス経路 | 公式LINEのリッチメニューボタンから遷移 |
| 同時アクセス | 約150名を想定 |
| 運用費用 | 0円（Supabase・Vercel無料プラン） |
| デザインスタイル | 手書きチョークアート風、パステルカラー |
| ブランドカラー | メインカラー：水色。ロゴあり |
| データ機密性 | レベル情報やWill Matrixの機密性は高くない |

---

## 7. P1・P2機能（今後の拡張予定）

P0で対応しない機能は以下の通りです。参考として記載しています。

**P1（第2フェーズ：4–5月）**  
- アクションリスト各タスクに「なぜこれが必要か」の解説文表示  
- アクションリストのさらに先のレベルも確認できる機能  
- データの定期バックアップ（GitHub Actions を使用。Supabase無料プランでは自動バックアップが unavailable なため、定期スケジュールで手動バックアップを実行する）

**P2（第3フェーズ：6月以降）**  
- 好み評価の履歴を遡れる機能  
- レベルアップ時のお祝い演出  
- ユーザーが自分で目標レベルを設定する機能  
- 通知機能（レベルアップやセッション前リマインド）  
- トレーナー側統計ダッシュボード（平均レベルなど）  
- データエクスポート（CSV出力）  
- 将来的には1日当たりの歩数表示も検討予定  

---

## 8. 開発・運用のポイント（メモ）

- トレーナー間のLINEグループはプロプランです。
- 設定画面のUIは、既存の管理側画面デザインを参考に開発側で作成します。
- リリース後の会員からの問い合わせは、公式LINEで山下さんが受け付けます。本システム内には問い合わせ窓口は不要です。
- システムの不具合対応体制については今後要相談。
